<h1> Overzicht reserveringen</h1>
<head>
  <%= stylesheet_link_tag "application", :media => 'print' %>
  <%= javascript_include_tag "sorttable" %>
</head>

<!--
<div class="alert alert-warning alert-dismissible fade in" role="alert">
      <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">Ã—</span><span class="sr-only">Sluit</span></button>
      <strong>Tip: </strong>Klik op de kopjes van het tabel om deze te sorteren. Het pijltje geeft dan aan of deze oplopend of aflopen gesorteerd worden.
      <br/>
      Probeer eens op "Datum" te klikken.
</div>

<div class="alert alert-info" role="alert">Let op er is 1 onbehandelde reservering</div>

   -->

<div class="row no_print">
  <div class="col-md-2 no_print">
    <%= link_to("Print dit overzicht", "javascript:print()", class: 'btn btn-default') %> 
  </div>
  <div class="col-md-2 no_print">
    <%= link_to 'Nieuwe Reservering', new_reservation_path, class: 'btn btn-primary' %>
  </div>
	<%= form_tag(reservations_path, :method => "get", id: "filter", target: "_blank") do %>
		<div class="col-md-2">
			<%= select_tag :year, options_for_select((Time.now.year - 2...Time.now.year + 5)) %>
			<%= select_tag :month, options_for_select((1..12)) %>
      		<%# datetime_select :filter, params[:filter], {discard_hour: true, discard_minute: true, discard_day: true}, class: 'form-control' %> 
    	</div>
    	<div class="col-md-2 pull-right">
    		<%= submit_tag "Filter op datum", :started_at => nil, class: 'btn btn-info' %>
    	</div>
    <% end %>
	
	<%= form_tag(reservations_path, :method => "get", id: "search-form", target: "_blank") do %>
		<div class="col-md-2 pull-right">
			<%= text_field_tag :search, params[:search], placeholder: "Zoek op naam", class: 'form-control' %>
		</div>
		<div class="col-md-1 pull-right">
			<%= submit_tag "Zoeken !", :name => nil, :last_name => nil, :first_name => nil, class: 'btn btn-info ' %>
		</div>
		<div class="col-md-8">
		</div>
	<% end %>
</div>
<br>
<div class="panel panel-info">


  <!-- Table -->
  <table class="sortable table table-hover">
  	<thead>
			<tr class="info">
				<th> </th>
				<th class="sortable col-md-0">Datum</th>
				<th class="sortable col-md-2">Tijdstip</th>
				<th class="col-md-2 sorttable_nosort">Naam</th>
				<th class="col-md-0 sorttable_nosort">Aantal personen</th>
				<th class="col-md-3 sorttable_nosort">Omschrijving</th>
				<th class="col-md-3 sorttable_nosort">Notities</th>
				<th class="col-md-1 sorttable_nosort no_print">Bekijk</th>
			</tr>
	</thead>
		<% @reservations.each do |reservation| %>
			<tr>
				<% if reservation.status == "1" %>
					<td class="warning"><%= reservation.status %></td>
				<% elsif reservation.status == "2" %>
					<td class="success"><%= reservation.status %></td>
				<% elsif reservation.status == "0" %>
					<td class="danger"><%= reservation.status %></td>
				<% else %>
					<td>-</td>
				<% end %>
				<td><%= reservation.started_at_date %></td>
				<td><%= reservation.started_at_time %> - <%= reservation.ended_at_time %></td>
				<td>(<%= reservation.customer.id  %>) <%= reservation.customer.first_name  %> <%= reservation.customer.last_name  %> 
					<% if reservation.customer.company.present? %>
						<br />(<%= reservation.customer.company.name%> (<%= reservation.customer.company.id %>)
					<% else %>
						<br /><%= reservation.customer.company(name: "Er is geen bedrijf gekoppeld") %>
					<% end %>
				</td>
				
				<td><%= reservation.amount %>
				<td><%= reservation.description %></td>
				<td><%= reservation.note %></td>
				<td class="no_print"><%= link_to 'Bekijk', reservation_path(reservation), class: 'btn btn-warning' %></td>
				<!--<td class="no_print"><%= link_to 'Edit', edit_reservation_path(reservation), class: 'btn btn-warning' %></td>
				<td class="no_print"><%= link_to 'Del', reservation_path(reservation),
														method: :delete, data: { confirm: 'Weet u het zeker?'}, class: 'btn btn-danger' %></td> -->
			</tr>

		<% end %>
  </table>
</div>
<nav >
  <%= will_paginate @reservations, :previous_label => 'Vorige', :next_label => 'Volgende' , renderer: BootstrapPagination::Rails %>
</nav>
<!--Popup met nieuwe reservering-->
<!-- /.modal -->